<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CKP Pay Hours</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
body { font-family: system-ui; background:#0f1115; color:white; padding:20px; }
button { padding:10px 16px; margin:5px 0; }
input, select { padding:8px; margin:5px 0; }
.card { background:#131722; padding:20px; border-radius:12px; max-width:600px; }
</style>
</head>
<body>

<div class="card">
<h2>CKP Cloud Sync Test</h2>

<div>
<label>Month Key:</label><br>
<input id="monthKey" value="2026-01">
</div>

<div>
<label>Test Value:</label><br>
<input id="testValue" placeholder="Type something">
</div>

<button onclick="saveData()">Save to Supabase</button>
<button onclick="loadData()">Load from Supabase</button>

<pre id="output"></pre>
</div>

<script>
const SUPABASE_URL = "https://ephkcxaggqspklvywxpl.supabase.co";
const SUPABASE_KEY = "sb_publishable_I86rCHvEzTwfScSzZ4hV7Q_J6oJbC64";

const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

async function saveData() {
  const monthKey = document.getElementById("monthKey").value;
  const value = document.getElementById("testValue").value;

  const { data, error } = await supabase
    .from("ckp_months")
    .upsert({
      user_id: "public-user",
      month_key: monthKey,
      payload: { test: value },
      updated_at: new Date()
    });

  document.getElementById("output").textContent =
    error ? error.message : "Saved successfully âœ…";
}

async function loadData() {
  const monthKey = document.getElementById("monthKey").value;

  const { data, error } = await supabase
    .from("ckp_months")
    .select("*")
    .eq("user_id", "public-user")
    .eq("month_key", monthKey)
    .single();

  document.getElementById("output").textContent =
    error ? error.message : JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
